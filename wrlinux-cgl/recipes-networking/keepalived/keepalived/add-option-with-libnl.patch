--- keepalived-1.2.15/configure.in.orig	2015-01-26 15:34:33.781388918 +0800
+++ keepalived-1.2.15/configure.in	2015-01-26 15:36:47.745392568 +0800
@@ -58,6 +58,10 @@
 AC_CHECK_LIB(crypto, MD5_Init,,AC_MSG_ERROR([OpenSSL libraries are required]))
 AC_CHECK_LIB(ssl, SSL_CTX_new,,AC_MSG_ERROR([OpenSSL libraries are required]))
 
+AC_ARG_ENABLE(libnl,
+  [  --enable-libnl          compile with libnl support])
+
+if test x"${enable_libnl}" == "xyes"; then
 AC_CHECK_LIB(nl-3, nl_socket_alloc,
   [
     AC_CHECK_LIB(nl-genl-3, genl_connect,
@@ -82,6 +87,10 @@
         AC_MSG_WARN([keepalived will be built without libnl support.])
       ])
   ])
+else
+        USE_NL="LIBIPVS_DONTUSE_NL"
+        AC_MSG_WARN([keepalived will be built without libnl support.])
+fi
 
 dnl ----[ Kernel version check ]----
 CPPFLAGS="$CPPFLAGS -I$kernelinc"
