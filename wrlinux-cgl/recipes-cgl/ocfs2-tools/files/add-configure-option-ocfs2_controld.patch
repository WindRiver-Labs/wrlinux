--- ocfs2-tools-1.6.4/configure.in.orig	2015-01-07 10:48:31.840184011 +0800
+++ ocfs2-tools-1.6.4/configure.in	2015-01-07 11:10:15.504219539 +0800
@@ -237,6 +237,10 @@
     [AC_MSG_WARN([libcman.h not found, cman support will not be built])])],
   [AC_MSG_WARN([libcman not found, cman support will not be built])])
 
+BUILD_OCFS2_CONTROLD=
+AC_ARG_ENABLE(ocfs2_controld, [ --enable-ocfs2_controld=[yes/no]    Build ocfs2 controld [default=yes]],,enable_ocfs2_controld=yes)
+
+if test "x$enable_ocfs2_controld" = "xyes"; then
 cpg_found=
 HAVE_COROSYNC=
 AC_CHECK_HEADER(corosync/cpg.h, [
@@ -377,7 +381,6 @@
 AC_SUBST(BUILD_FSDLM_SUPPORT)
 AC_SUBST(DL_LIBS)
 
-BUILD_OCFS2_CONTROLD=
 if test "x$cpg_found" = "xyes" -a "x$ckpt_found" = "xyes" -a "x$libdlmcontrol_found" = "xyes"; then
   if test "x$fsdlm_found" = "xyes"; then
     BUILD_OCFS2_CONTROLD=yes
@@ -385,6 +388,8 @@
     AC_MSG_WARN([fsdlm support is not available, ocfs2_controld will not be built])
   fi
 fi
+
+fi # test $enable_ocfs2_controld
 AC_SUBST(BUILD_OCFS2_CONTROLD)
 
 BUILD_PCMK_SUPPORT=
