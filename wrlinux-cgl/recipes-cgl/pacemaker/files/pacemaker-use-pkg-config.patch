From c26c7c635de65235318818d33048c7cec090215b Mon Sep 17 00:00:00 2001
From: Robert Yang <liezhi.yang@windriver.com>
Date: Fri, 20 Jun 2014 20:47:24 -0700
Subject: [PATCH] configure.ac: use pkg-config to check xml2

The xml2-config has gone, see oe-core's 5870bd272b0b077d0826fb900b251884c1c05061

Upstream-Status: Pending

Signed-off-by: Robert Yang <liezhi.yang@windriver.com>
---
 configure.ac |    8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

diff --git a/configure.ac b/configure.ac
index dab4f77..db4743c 100644
--- a/configure.ac
+++ b/configure.ac
@@ -525,7 +525,6 @@ AC_PATH_PROGS(TAR, tar)
 AC_PATH_PROGS(MD5, md5)
 AC_PATH_PROGS(TEST, test)
 AC_PATH_PROGS(PKGCONFIG, pkg-config)
-AC_PATH_PROGS(XML2CONFIG, xml2-config)
 AC_PATH_PROGS(VALGRIND_BIN, valgrind, /usr/bin/valgrind)
 AC_DEFINE_UNQUOTED(VALGRIND_BIN, "$VALGRIND_BIN", Valgrind command)
 
@@ -766,10 +765,9 @@ dnl AC_CHECK_HEADERS(netinet/ip6.h)
 dnl AC_CHECK_HEADERS(netinet/ip_icmp.h)
 
 AC_MSG_CHECKING(for special libxml2 includes)
-if test "x$XML2CONFIG" = "x"; then
-   AC_MSG_ERROR(libxml2 config not found)
-else
-   XML2HEAD="`$XML2CONFIG --cflags`"
+PKG_CHECK_MODULES(PKG_XML2, [libxml-2.0],,)
+if test "x$PKG_XML2_CFLAGS" != "x"; then
+   XML2HEAD="$PKG_XML2_CFLAGS"
    AC_MSG_RESULT($XML2HEAD)
    AC_CHECK_LIB(xml2, xmlReadMemory)
    AC_CHECK_LIB(xslt, xsltApplyStylesheet)
-- 
1.7.9.5

