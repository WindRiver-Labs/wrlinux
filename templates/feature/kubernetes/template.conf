DISTRO_FEATURES_append = " virtualization"

# kubernetes
PNWHITELIST_virtualization-layer += 'kubernetes'
PNWHITELIST_networking-layer += 'ebtables'
PNWHITELIST_virtualization-layer += 'cni'

# docker
PNWHITELIST_virtualization-layer += 'docker'
PNWHITELIST_networking-layer += 'bridge-utils'
PNWHITELIST_virtualization-layer += 'compose-file'
PNWHITELIST_virtualization-layer += 'containerd-opencontainers'
PNWHITELIST_virtualization-layer += 'go-capability'
PNWHITELIST_virtualization-layer += 'go-cli'
PNWHITELIST_virtualization-layer += 'go-connections'
PNWHITELIST_virtualization-layer += 'go-context'
PNWHITELIST_virtualization-layer += 'go-dbus'
PNWHITELIST_virtualization-layer += 'go-distribution'
PNWHITELIST_virtualization-layer += 'go-fsnotify'
PNWHITELIST_virtualization-layer += 'go-logrus'
PNWHITELIST_virtualization-layer += 'go-mux'
PNWHITELIST_virtualization-layer += 'go-patricia'
PNWHITELIST_virtualization-layer += 'go-pty'
PNWHITELIST_virtualization-layer += 'go-systemd'
PNWHITELIST_virtualization-layer += 'grpc-go'
PNWHITELIST_virtualization-layer += 'notary'
PNWHITELIST_virtualization-layer += 'runc-docker'
PNWHITELIST_virtualization-layer += 'tini'

# x86 is offically not supported by kubernetes, but wrlinux defaults to enable multilib for x86-64
NON_MULTILIB_RECIPES_append_x86-64 = " kubernetes"

# k8s uses systemd cgroup driver as the prefered cgroup driver, enable such support in runc
PACKAGECONFIG_pn-runc-docker = ""

# Set preferred version to ensure things work well
PREFERRED_VERSION_cni = "0.7.1"
PREFERRED_VERSION_docker = "18.09.9"
PREFERRED_VERSION_kubernetes = "1.15.3"
